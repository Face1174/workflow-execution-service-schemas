{
  "swagger": "2.0",
  "info": {
    "title": "workflow_execution.proto",
    "version": "version not set"
  },
  "schemes": [
    "http",
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v1/workflows": {
      "post": {
        "summary": "Run a workflow",
        "operationId": "RunWorkflow",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/ga4gh_workflow_execWorkflowRunID"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/ga4gh_workflow_execWorkflowRequest"
            }
          }
        ],
        "tags": [
          "WorkflowService"
        ]
      }
    },
    "/v1/workflows/{workflow_ID}": {
      "get": {
        "summary": "Get detailed info about a running workflow",
        "operationId": "GetWorkflowLog",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/ga4gh_workflow_execWorkflowLog"
            }
          }
        },
        "parameters": [
          {
            "name": "workflow_ID",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "WorkflowService"
        ]
      },
      "delete": {
        "summary": "Cancel a running workflow",
        "operationId": "CancelJob",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/ga4gh_workflow_execWorkflowRunID"
            }
          }
        },
        "parameters": [
          {
            "name": "workflow_ID",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "WorkflowService"
        ]
      }
    },
    "/v1/workflows/{workflow_ID}/status": {
      "get": {
        "summary": "Get quick status info about a running workflow",
        "operationId": "GetWorkflowStatus",
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "$ref": "#/definitions/ga4gh_workflow_execWorkflowStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "workflow_ID",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "WorkflowService"
        ]
      }
    }
  },
  "definitions": {
    "ga4gh_task_execJobLog": {
      "type": "object",
      "properties": {
        "cmd": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "The command line that was run"
        },
        "startTime": {
          "type": "string",
          "title": "When the command was executed"
        },
        "endTime": {
          "type": "string",
          "title": "When the command completed"
        },
        "stdout": {
          "type": "string",
          "title": "Sample of stdout (not guaranteed to be entire log)"
        },
        "stderr": {
          "type": "string",
          "title": "Sample of stderr (not guaranteed to be entire log)"
        },
        "exitCode": {
          "type": "integer",
          "format": "int32",
          "title": "Exit code of the program"
        }
      }
    },
    "ga4gh_task_execState": {
      "type": "string",
      "enum": [
        "Unknown",
        "Queued",
        "Running",
        "Paused",
        "Complete",
        "Error",
        "SystemError",
        "Canceled"
      ],
      "default": "Unknown"
    },
    "ga4gh_task_execTaskParameter": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "title": "name of the parameter"
        },
        "description": {
          "type": "string",
          "title": "optional text description"
        },
        "location": {
          "type": "string",
          "title": "location in long term storage, is a url specific to the implementing \nsystem. For example s3://my-object-store/file1 or gs://my-bucket/file2 or\nfile:///path/to/my/file"
        },
        "path": {
          "type": "string",
          "title": "path in the machine file system. Note, this MUST be a path that exists\nwithin one of the defined volumes"
        },
        "class": {
          "type": "string",
          "title": "Type of data, \"File\" or \"Directory\"\nif used for an output all the files in the directory\nwill be copied to the storage location"
        },
        "create": {
          "type": "boolean",
          "format": "boolean",
          "title": "if the parameter is an output, should the element be created before executing\nthe command. For example if saving the working directory as an output,\nthe directory needs to exist before the command is called. If false, it is\nassumed that the user will create the element as a part of the operation"
        }
      },
      "title": "Parameters for Task"
    },
    "ga4gh_workflow_execWorkflowLog": {
      "type": "object",
      "properties": {
        "request": {
          "$ref": "#/definitions/ga4gh_workflow_execWorkflowRequest"
        },
        "logs": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/ga4gh_task_execJobLog"
          }
        }
      }
    },
    "ga4gh_workflow_execWorkflowRequest": {
      "type": "object",
      "properties": {
        "workflow_params": {
          "type": "string"
        },
        "workflow_descriptor": {
          "type": "string"
        },
        "workflow_type": {
          "$ref": "#/definitions/ga4gh_workflow_execWorkflowType"
        },
        "workflow_version": {
          "type": "string"
        }
      }
    },
    "ga4gh_workflow_execWorkflowRunID": {
      "type": "object",
      "properties": {
        "workflow_ID": {
          "type": "string"
        }
      }
    },
    "ga4gh_workflow_execWorkflowStatus": {
      "type": "object",
      "properties": {
        "workflow_ID": {
          "type": "string"
        },
        "metadata": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "state": {
          "$ref": "#/definitions/ga4gh_task_execState"
        },
        "logs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ga4gh_task_execJobLog"
          }
        },
        "outputs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ga4gh_task_execTaskParameter"
          }
        }
      }
    },
    "ga4gh_workflow_execWorkflowType": {
      "type": "string",
      "enum": [
        "UNKNOWN",
        "CWL",
        "WDL"
      ],
      "default": "UNKNOWN"
    }
  }
}
